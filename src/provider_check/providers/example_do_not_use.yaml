---
# Example provider configuration with all supported fields.
# This file is disabled by default and is meant purely for documentation.
# It will NOT appear in --providers-list and cannot be selected unless
# you copy it into a custom provider directory and set enabled: true.

enabled: false
name: Example Provider (DO NOT USE)
version: 1
short_description: "Optional short summary of the provider (keep under 150 chars)."
long_description: |
  Optional long-form description of the provider. Use multiple lines to
  explain what the configuration is intended for and any key assumptions.

variables:
  # Provider variables can be referenced using {name} placeholders.
  # Values are provided via --provider-var name=value (repeatable).
  tenant:
    required: true
    description: "Example required variable used in record templates."
  region:
    default: us
    description: "Optional variable with a default."

records:
  mx:
    # List of MX hostnames required for the provider.
    # Trailing dots are recommended to keep names fully-qualified.
    hosts:
      - mx1.example-provider.test.
      - mx2.example-provider.test.
    # Optional list of MX records with explicit priorities.
    # When provided, these priorities are validated.
    records:
      - host: mx1.example-provider.test.
        priority: 10
      - host: mx2.example-provider.test.
        priority: 20
    # Optional mapping of host -> priority (alternate form to records list).
    priorities:
      mx3.example-provider.test.: 30

  spf:
    # SPF include mechanisms the provider requires (values only).
    required_includes:
      - example-provider.test
      - spf.example-provider.test
    # Strict mode can enforce a specific SPF string when provided.
    strict_record: "v=spf1 include:example-provider.test -all"
    # Optional list of additional SPF mechanisms that must be present.
    # Include full tokens (e.g., a, mx:mail.example.test, exists:%{i}.spf.example.test).
    required_mechanisms:
      - a
      - mx:mail.example-provider.test
      - exists:%{i}.spf.example-provider.test
    # Optional list of allowed mechanisms beyond required ones.
    # These are permitted in standard mode without warnings.
    allowed_mechanisms:
      - mx
      - ptr
      - ip4:203.0.113.0/24
      - ip6:2001:db8::/32
    # Optional SPF modifiers that must be present with exact values.
    # Common modifiers are redirect= and exp=.
    required_modifiers:
      redirect: _spf.example-provider.test
      exp: exp._spf.example-provider.test

  dkim:
    # DKIM selectors that must exist for the domain.
    selectors:
      - EXAMPLE1
      - EXAMPLE2
    # DKIM record type: cname (hosted) or txt (self-hosted).
    record_type: cname
    # Template for the expected CNAME target for each selector.
    # The {selector} placeholder is required.
    target_template: "{selector}._domainkey.example-provider.test."
    # Optional mapping of selector -> expected TXT value.
    # Used when record_type is txt (ignored for cname).
    txt_values:
      EXAMPLE1: "v=DKIM1; k=rsa; p=BASE64KEY"

  cname:
    # Required CNAME records (name -> expected target).
    records:
      lyncdiscover: webdir.example-provider.test.
      sip: sipdir.example-provider.test.

  srv:
    # Required SRV records (name -> list of entries).
    records:
      _sip._tls:
        - priority: 100
          weight: 1
          port: 443
          target: sipdir.example-provider.test.
      _sipfederationtls._tcp:
        - priority: 100
          weight: 1
          port: 5061
          target: sipfed.example-provider.test.

  txt:
    # Required TXT records for validation (name -> list of expected values).
    # Names may be relative (appended to the domain) or fully-qualified.
    required:
      _verification:
        - "example-verification=abc123"
        - "example-verification=def456"
      "validation.example-provider.test.":
        - "v=custom-validation; token=xyz"
    # When true, the provider requires a user-supplied TXT verification record.
    # The user must pass it via --txt-verification. If omitted, the result is WARN (unless skipped).
    verification_required: true

  dmarc:
    # Default DMARC policy to apply when --dmarc-policy is not provided.
    default_policy: reject
    # Whether the DMARC record must include a rua tag.
    rua_required: true
    # Whether the DMARC record must include a ruf tag.
    ruf_required: false
    # Optional list of rua URIs that must be present in the DMARC record.
    # Use full mailto: URIs to avoid ambiguity. {domain} is replaced at runtime.
    required_rua:
      - mailto:postmaster@{domain}
      - mailto:dmarc-aggregate@example-provider.test
      - mailto:dmarc-fallback@example-provider.test
    # Optional list of ruf URIs that must be present in the DMARC record.
    # Use full mailto: URIs to avoid ambiguity. {domain} is replaced at runtime.
    required_ruf:
      - mailto:dmarc-forensic@example-provider.test
    # Optional additional DMARC tags that must match exact values.
    # These are checked in standard mode and enforced in strict mode output.
    required_tags:
      adkim: s
      aspf: s
      pct: "100"
